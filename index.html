<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>雑なアウトプット</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="雑なアウトプット">
<meta property="og:url" content="https://ppworks.github.io/index.html">
<meta property="og:site_name" content="雑なアウトプット">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="雑なアウトプット">
  
    <link rel="alternate" href="/atom.xml" title="雑なアウトプット" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-52654728-4', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  <script type="text/javascript" src="https://s.hatena.ne.jp/js/HatenaStar.js"></script>
  <script type="text/javascript">
    Hatena.Star.Token = 'fc701925dcee0a5423226786dd300651d572ca5e';
    Hatena.Star.SiteConfig = {
      entryNodes: {
        'article.article': [
          {
            uri: 'a.article-title',
            title: 'a.article-title',
            container: 'header.article-header h1'
          },
          {
            uri: 'a.article-title',
            title: 'a.article-title',
            container: '.article-footer'
          }
        ]
      }
    };
  </script>
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">雑なアウトプット</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/posts">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        <a id="nav-github-link" class="nav-icon" href="https://github.com/ppworks/ppworks.github.io" title="GitHub"></a>
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://ppworks.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-251.html" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/posts/251/" class="article-date">
  <time datetime="2017-11-03T18:10:37.000Z" itemprop="datePublished">2017-11-03 18:10:37</time>
</a>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        

  <h1 itemprop="name">
    <a class="article-title" href="/posts/251/">Dockerでrails s</a>
  </h1>


      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="/posts/250">#250:  blog/Dockerでrails new</a> 出来たので今回は、<code>rails s</code>したくていろいろ調べながら、最低限の<code>Dockerfile</code>と<code>docker-comose.yml</code>が出来上がったのでメモ。</p>
<h2 id="Dockerfile-dev"><a href="#Dockerfile-dev" class="headerlink" title="Dockerfile-dev"></a>Dockerfile-dev</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">FROM ruby:2.4.2-slim</div><div class="line">MAINTAINER Naoto Koshikawa &lt;koshikawa@ppworks.jp&gt;</div><div class="line"></div><div class="line">ENV DEBIAN_FRONTEND noninteractive</div><div class="line"></div><div class="line"># set locale and timezone</div><div class="line">RUN apt-get update -qq &amp;&amp; \</div><div class="line">  apt-get -y upgrade &amp;&amp; \</div><div class="line">  apt-get -y install locales &amp;&amp; \</div><div class="line">  apt-get clean &amp;&amp; \</div><div class="line">  apt-get autoclean &amp;&amp; \</div><div class="line">  apt-get autoremove &amp;&amp; \</div><div class="line">  echo en_US.UTF-8 UTF-8 &gt; /etc/locale.gen &amp;&amp; locale-gen &amp;&amp; dpkg-reconfigure locales &amp;&amp; \</div><div class="line">  echo &quot;Asia/Tokyo&quot; &gt; /etc/timezone &amp;&amp; dpkg-reconfigure -f noninteractive tzdata</div><div class="line"></div><div class="line">ENV TZ Asia/Tokyo</div><div class="line"></div><div class="line">RUN apt-get -y --no-install-recommends install \</div><div class="line">  build-essential \</div><div class="line">  libpq-dev \</div><div class="line">  nodejs \</div><div class="line">  wget</div><div class="line"></div><div class="line">ENV ENTRYKIT_VERSION 0.4.0</div><div class="line">RUN wget https://github.com/progrium/entrykit/releases/download/v$&#123;ENTRYKIT_VERSION&#125;/entrykit_$&#123;ENTRYKIT_VERSION&#125;_Linux_x86_64.tgz \</div><div class="line">  &amp;&amp; tar -xvzf entrykit_$&#123;ENTRYKIT_VERSION&#125;_Linux_x86_64.tgz \</div><div class="line">  &amp;&amp; rm entrykit_$&#123;ENTRYKIT_VERSION&#125;_Linux_x86_64.tgz \</div><div class="line">  &amp;&amp; mv entrykit /bin/entrykit \</div><div class="line">  &amp;&amp; chmod +x /bin/entrykit \</div><div class="line">  &amp;&amp; entrykit --symlink</div><div class="line"></div><div class="line">RUN mkdir /app</div><div class="line">WORKDIR /app</div><div class="line"></div><div class="line">ENTRYPOINT [ \</div><div class="line">  &quot;prehook&quot;, &quot;bundle install -j4 --quiet&quot;, &quot;--&quot;]</div></pre></td></tr></table></figure>
<h2 id="docker-compose-yml"><a href="#docker-compose-yml" class="headerlink" title="docker-compose.yml"></a>docker-compose.yml</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">version: &apos;3&apos;</div><div class="line">services:</div><div class="line">  rails: &amp;app_base</div><div class="line">    build:</div><div class="line">      context: .</div><div class="line">      dockerfile: Dockerfile-dev</div><div class="line">    environment:</div><div class="line">      DATABASE_URL: &quot;postgres://postgres:@db:5432/your_app_development&quot;</div><div class="line">    volumes:</div><div class="line">      - &quot;.:/app&quot;</div><div class="line">    ports:</div><div class="line">      - &quot;3000:3000&quot;</div><div class="line">    depends_on:</div><div class="line">      - db</div><div class="line">    command: [&quot;bundle&quot;, &quot;exec&quot;, &quot;rails&quot;, &quot;s&quot;, &quot;-b&quot;, &quot;0.0.0.0&quot;]</div><div class="line">  db:</div><div class="line">    image: &quot;postgres:10.0&quot;</div><div class="line">    volumes:</div><div class="line">      - pg-data:/var/lib/postgresql/data</div><div class="line">volumes:</div><div class="line">  pg-data:</div><div class="line">    driver: local</div></pre></td></tr></table></figure>
<h2 id="dockerignore"><a href="#dockerignore" class="headerlink" title=".dockerignore"></a>.dockerignore</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">.git</div><div class="line">doc</div><div class="line">docker-compose.yml</div><div class="line">log</div><div class="line">tmp</div><div class="line">Dockerfile</div><div class="line">Dockerfile-dev</div></pre></td></tr></table></figure>
<h2 id="config-database-yml"><a href="#config-database-yml" class="headerlink" title="config/database.yml"></a>config/database.yml</h2><p>雑に環境変数<code>DATABASE_URL</code>で繋ぐようにしてみた。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">default: &amp;default</div><div class="line">  adapter: postgresql</div><div class="line">  encoding: unicode</div><div class="line">  pool: &lt;%= ENV.fetch(&quot;RAILS_MAX_THREADS&quot;) &#123; 5 &#125; %&gt;</div><div class="line">  url: &lt;%= ENV[&apos;DATABASE_URL&apos;] %&gt;</div><div class="line">development:</div><div class="line">  &lt;&lt;: *default</div><div class="line">test:</div><div class="line">  &lt;&lt;: *default</div><div class="line">production:</div><div class="line">  &lt;&lt;: *default</div></pre></td></tr></table></figure>
<h2 id="使い方"><a href="#使い方" class="headerlink" title="使い方"></a>使い方</h2><p><code>Dockerfile</code>を更新した場合は</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">docker-compose build</div><div class="line">docker image prune # 必要に応じて</div></pre></td></tr></table></figure>
<p>普段の開発は</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker-compose up -d</div></pre></td></tr></table></figure>
<p>migrationなどの実行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker-compose exec rails db:migate</div></pre></td></tr></table></figure>
<p>DBに入る</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker-compose db psql -u postgres</div></pre></td></tr></table></figure>
<p>みたいな感じ。</p>
<h2 id="参考にした"><a href="#参考にした" class="headerlink" title="参考にした"></a>参考にした</h2><ul>
<li><a href="https://qiita.com/kawasin73/items/2253523be18e5afd994f" target="_blank" rel="external">高速に開発できる Docker + Rails開発環境のテンプレートを作った - Qiita</a></li>
<li><a href="https://qiita.com/joker1007/items/9f54e763ae640f757cfb" target="_blank" rel="external">開発しやすいRails on Docker環境の作り方 - Qiita</a></li>
</ul>
<p>この辺のQiita記事を参考にしつつも、そもそも<code>Dockerfile</code>の記述方法もよくわからないし、<code>docker-compose.yml</code>の記述方法もよくわからなかったので、公式ドキュメントを読みまくった。</p>
<ul>
<li><a href="https://docs.docker.com/engine/reference/builder/" target="_blank" rel="external">Dockerfile reference | Docker Documentation</a></li>
<li><a href="https://docs.docker.com/compose/compose-file/" target="_blank" rel="external">Compose file version 3 reference | Docker Documentation</a></li>
</ul>
<p>buildしまくっていると、imageの差分が出来まくるので、不要なものを消したいと思って色々調べた結果</p>
<blockquote>
<p><a href="https://suin.io/537" target="_blank" rel="external">Dockerの不要なコンテナ・イメージを一括削除する方法</a></p>
</blockquote>
<p>がとても参考になった。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker image prune</div></pre></td></tr></table></figure>
<p>をよく使う。</p>
<p>次はいまConoHa VPSで雑に動かしているアプリをDocker化してみようと思う。<br>本番も、<code>docker-compose</code>使うことになるのかな。だとしたら、今回作った開発用のものは<code>docker-compose-dev.yml</code>みたいな感じになるだろうか。試行錯誤してみよ。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ppworks.github.io/posts/251/" data-id="cj9rrblki000kx52mw0bdysqq" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-250.html" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/posts/250/" class="article-date">
  <time datetime="2017-11-02T16:12:59.000Z" itemprop="datePublished">2017-11-02 16:12:59</time>
</a>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        

  <h1 itemprop="name">
    <a class="article-title" href="/posts/250/">Dockerでrails new</a>
  </h1>


      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Macのローカルで<code>rails new</code>する際に、最初にどこかに<code>rails</code>が必要なのが嫌で、<code>rails new</code>で出来たディレクトリだけ欲しくて、<code>Dockerfile</code>を書いてみた。</p>
<p><a href="https://github.com/ppworks/docker-rails_new" target="_blank" rel="external">https://github.com/ppworks/docker-rails_new</a></p>
<h2 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h2><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">FROM</span> ruby:<span class="number">2.4</span>.<span class="number">2</span>-slim</div><div class="line"><span class="keyword">MAINTAINER</span> Naoto Koshikawa &lt;koshikawa@ppworks.jp&gt;</div><div class="line"></div><div class="line"><span class="keyword">ENV</span> DEBIAN_FRONTEND noninteractive</div><div class="line"></div><div class="line"><span class="keyword">RUN</span> apt-get update -qq &amp;&amp; \</div><div class="line">    apt-get -y install build-essential # nio4r</div><div class="line"></div><div class="line">RUN mkdir /app</div><div class="line">WORKDIR /app</div><div class="line">COPY Gemfile /app/Gemfile</div><div class="line">RUN bundle install -j4</div></pre></td></tr></table></figure>
<h2 id="Gemfile"><a href="#Gemfile" class="headerlink" title="Gemfile"></a>Gemfile</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ruby &apos;2.4.2&apos;</div><div class="line">source &apos;https://rubygems.org&apos;</div><div class="line">gem &apos;rails&apos;, &apos;&gt;= 5.1&apos;</div></pre></td></tr></table></figure>
<h2 id="docker-compose-yml"><a href="#docker-compose-yml" class="headerlink" title="docker-compose.yml"></a>docker-compose.yml</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">version: &apos;3&apos;</div><div class="line">services:</div><div class="line">  rails-new:</div><div class="line">    build:</div><div class="line">      context: .</div><div class="line">      dockerfile: Dockerfile</div><div class="line">    volumes:</div><div class="line">      - &quot;.:/app&quot;</div><div class="line">    tty: true</div><div class="line">    stdin_open: true</div></pre></td></tr></table></figure>
<h2 id="rails-new"><a href="#rails-new" class="headerlink" title="rails new"></a>rails new</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">cd ~/docker</div><div class="line">git@github.com:ppworks/docker-rails_new.git dev</div><div class="line">cd dev</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker-compose run --rm rails-new rails new your-awesome-app --skip-bundle</div></pre></td></tr></table></figure>
<p>Dockerよくわかってないので、もっとかっこいい方法があるかもしれない。<br>次は、Docker上で<code>rails s</code>してみたいと思う。</p>
<h2 id="追記"><a href="#追記" class="headerlink" title="追記"></a>追記</h2><p>2017-11-02 16:12<br><a href="https://github.com/ppworks/docker-rails_new/pull/1" target="_blank" rel="external">https://github.com/ppworks/docker-rails_new/pull/1</a><br>の内容を反映した。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ppworks.github.io/posts/250/" data-id="cj9rrblkf000jx52mv47v6akg" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-249.html" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/posts/249/" class="article-date">
  <time datetime="2017-11-01T15:33:02.000Z" itemprop="datePublished">2017-11-01 15:33:02</time>
</a>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        

  <h1 itemprop="name">
    <a class="article-title" href="/posts/249/">Heroku SSL EndpointからAutomated Certificate Managementへ移行する</a>
  </h1>


      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Heroku SSL EndpointからAutomated Certificate Managementへダウンタイムなしで移行したので、その記録。</p>
<p>Heroku SSL化を挟まないと、<code>heroku certs:auto:enable</code>してから<code>status: OK</code>になるまでの間にダウンタイムが発生する。そのあたりの注意点は公式ドキュメントに書いてあった。</p>
<blockquote>
<p><a href="https://devcenter.heroku.com/articles/automated-certificate-management#migrating-from-ssl-endpoint" target="_blank" rel="external">https://devcenter.heroku.com/articles/automated-certificate-management#migrating-from-ssl-endpoint</a><br>Migrating from the SSL Endpoint addon to Automated Certificate Management requires a DNS change. However, you can use Heroku SSL (SNI) as an intermediate step to avoid downtime for your custom domain. Start by following these instructions to migrate from SSL Endpoint to Heroku SSL (SNI). Once that process is complete, you can enable ACM with no downtime as described above.</p>
</blockquote>
<p>いちど、Heroku SSLへ移行してから、ACM(Automated Certificate Management)へ移行すればいい。</p>
<p>Heroku SSLを使うには、<code>heroku certs:add</code>コマンドに<code>--type sni</code>オプションを付けて証明書を追加する。</p>
<p>このとき、既存の証明書と同じものをアップロードしてオッケー。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">heroku certs:add example.com.crt example.com.key --type sni</div></pre></td></tr></table></figure>
<p>すると、こんな感じで2つの証明書が表示される。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">heroku certs -a pplog</div><div class="line">Name                Endpoint                  Common Name(s)            Expires               Trusted  Type</div><div class="line">──────────────────  ────────────────────────  ────────────────────────  ──────────</div><div class="line">gifu-1545           gifu-1545.herokussl.com   www.pplog.net, pplog.net  2018-01-30 03:10 UTC  True     Endpoint</div><div class="line">camarasaurus-91097  (Not applicable for SNI)  www.pplog.net, pplog.net  2018-01-30 03:10 UTC  True     SNI</div></pre></td></tr></table></figure>
<p>ドメインを確認すると</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">heroku domains -a pplog</div><div class="line">=== pplog Heroku Domain</div><div class="line">pplog.herokuapp.com</div><div class="line"></div><div class="line">=== pplog Custom Domains</div><div class="line">Domain Name    DNS Record Type  DNS Target</div><div class="line">─────────────  ───────────────  ───────────────────────────</div><div class="line">www.pplog.net  CNAME            www.pplog.net.herokudns.com</div><div class="line">pplog.net      ALIAS or ANAME   pplog.net.herokudns.com</div></pre></td></tr></table></figure>
<p><code>CNAME</code>と<code>ALIAS</code>に設定すべき項目が表示されるので、これらをDNSの設定に反映する。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dig CNAME www.pplog.net</div></pre></td></tr></table></figure>
<p>TTLの設定に寄るけども、DNS反映されたら、<code>Heroku SSL Endpoint</code>のアドオンを削除する。（焦らなくてもいいので次の日にでも）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">heroku addons:destroy ssl -a pplog</div></pre></td></tr></table></figure>
<p><code>Automated Certificate Management</code>を有効にする。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">heroku certs:auto:enable -a pplog</div><div class="line">Enabling Automatic Certificate Management... done</div></pre></td></tr></table></figure>
<p>すぐに確認すると、<code>In Progress</code>になっている。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">heroku certs:auto -a pplog</div><div class="line">=== Automatic Certificate Management is enabled on pplog</div><div class="line"></div><div class="line">Domain         Status</div><div class="line">─────────────  ───────────</div><div class="line">www.pplog.net  In Progress</div><div class="line">pplog.net      In Progress</div></pre></td></tr></table></figure>
<p>しばらくすると、<code>OK</code>になる。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">heroku certs:auto -a pplog</div><div class="line">=== Automatic Certificate Management is enabled on pplog</div><div class="line"></div><div class="line">Certificate details:</div><div class="line">Common Name(s): pplog.net</div><div class="line">                www.pplog.net</div><div class="line">Expires At:     2018-01-30 04:51 UTC</div><div class="line">Issuer:         /C=US/O=Let&apos;s Encrypt/CN=Let&apos;s Encrypt Authority X3</div><div class="line">Starts At:      2017-11-01 04:51 UTC</div><div class="line">Subject:        /CN=pplog.net</div><div class="line">SSL certificate is verified by a root authority.</div><div class="line"></div><div class="line">Domain         Status</div><div class="line">─────────────  ──────</div><div class="line">www.pplog.net  OK</div><div class="line">pplog.net      OK</div></pre></td></tr></table></figure>
<p>証明書の<code>Type</code>が<code>ACM</code>になっていれば完了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">heroku certs -a pplog</div><div class="line">Name                Common Name(s)            Expires               Trusted  Type</div><div class="line">──────────────────  ────────────────────────  ────────────────────  ───────  ────</div><div class="line">camarasaurus-91097  pplog.net, www.pplog.net  2018-01-30 04:51 UTC  True     ACM</div></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ppworks.github.io/posts/249/" data-id="cj9rrblka000gx52mye68ly4u" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-245.html" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/posts/245/" class="article-date">
  <time datetime="2017-10-31T10:06:58.000Z" itemprop="datePublished">2017-10-31 10:06:58</time>
</a>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        

  <h1 itemprop="name">
    <a class="article-title" href="/posts/245/">勉強/2017/10/31/Hexo のサイドバーに travis の builds を表示した</a>
  </h1>


      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Copied from: <a href="/posts/243">blog/勉強/2017/10/30/Hexo と esa 連携するときの travis の設定</a></p>
<p>travisのbuildろぐをサイドバーに出してみたくて出してみた。フィードは、こんな感じでアクセスできるので<a href="https://github.com/ppworks/ppworks.github.io/commit/fbf303984bde502b0329df34951e524052feb26c" target="_blank" rel="external">JavaScriptで持ってきてパース</a>する。だいぶ雑なコードになったので、あとでもうちょいちゃんとするほうがいいかも。</p>
<blockquote>
<p><a href="https://api.travis-ci.org/repos/ppworks/ppworks.github.io/builds.atom" target="_blank" rel="external">https://api.travis-ci.org/repos/ppworks/ppworks.github.io/builds.atom</a></p>
</blockquote>
<p><img src="https://img.esa.io/uploads/production/attachments/4729/2017/10/31/11/f854941d-2b7e-4ae3-bc36-9fe51bfa6bb5.png" width="300"></p>
<p>それっぽく表示するために、各ステータスのtravis-ci上での色を調べてた。</p>
<table>
<thead>
<tr>
<th>status</th>
<th>color</th>
</tr>
</thead>
<tbody>
<tr>
<td>received</td>
<td><span style="border-left-style: solid; border-left-width: 10px; border-color: #edde3f; color: #edde3f; background-color: #fff; padding: 3px 6px 3px 6px;">#edde3f</span></td>
</tr>
<tr>
<td>queued</td>
<td><span style="border-left-style: solid; border-left-width: 10px; border-color: #edde3f; color: #edde3f; background-color: #fff; padding: 3px 6px 3px 6px;">#edde3f</span></td>
</tr>
<tr>
<td>created</td>
<td><span style="border-left-style: solid; border-left-width: 10px; border-color: #edde3f; color: #edde3f; background-color: #fff; padding: 3px 6px 3px 6px;">#edde3f</span></td>
</tr>
<tr>
<td>booting</td>
<td><span style="border-left-style: solid; border-left-width: 10px; border-color: #edde3f; color: #edde3f; background-color: #fff; padding: 3px 6px 3px 6px;">#edde3f</span></td>
</tr>
<tr>
<td>started</td>
<td><span style="border-left-style: solid; border-left-width: 10px; border-color: #edde3f; color: #edde3f; background-color: #fff; padding: 3px 6px 3px 6px;">#edde3f</span></td>
</tr>
<tr>
<td>canceled</td>
<td><span style="border-left-style: solid; border-left-width: 10px; border-color: #9d9d9d; color: #9d9d9d; background-color: #fff; padding: 3px 6px 3px 6px;">#9d9d9d</span></td>
</tr>
<tr>
<td>passed</td>
<td><span style="border-left-style: solid; border-left-width: 10px; border-color: #39aa56; color: #39aa56; background-color: #fff; padding: 3px 6px 3px 6px;">#39aa56</span></td>
</tr>
<tr>
<td>errored</td>
<td><span style="border-left-style: solid; border-left-width: 10px; border-color: #db4545; color: #db4545; background-color: #fff; padding: 3px 6px 3px 6px;">#db4545</span></td>
</tr>
<tr>
<td>failed</td>
<td><span style="border-left-style: solid; border-left-width: 10px; border-color: #db4545; color: #db4545; background-color: #fff; padding: 3px 6px 3px 6px;">#db4545</span></td>
</tr>
</tbody>
</table>
<p>ステータスの一覧がtravis-ciのドキュメントで探し出せず、CSSのスタイルから調べることになった。各ステータスの正しい順序は未検証。できれば各ステータスの意味も正確に知りたい気持ちもある。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ppworks.github.io/posts/245/" data-id="cj9rrblk6000ex52mld71lfrv" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-244.html" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/posts/244/" class="article-date">
  <time datetime="2017-10-31T06:01:19.000Z" itemprop="datePublished">2017-10-31 06:01:19</time>
</a>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        

  <h1 itemprop="name">
    <a class="article-title" href="/posts/244/">Seed FuをPostgreSQL 10 対応する</a>
  </h1>


      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>当面は、<a href="https://github.com/ppworks/seed-fu/tree/support-postgresql10" target="_blank" rel="external">https://github.com/ppworks/seed-fu/tree/support-postgresql10</a> を使う。</p>
<blockquote>
<p><a href="https://www.postgresql.org/docs/10/static/release-10.html" target="_blank" rel="external">https://www.postgresql.org/docs/10/static/release-10.html</a><br>Move sequences’ metadata fields into a new pg_sequence system catalog (Peter Eisentraut)</p>
<p>A sequence relation now stores only the fields that can be modified by nextval(), that is last_value, log_cnt, and is_called. Other sequence properties, such as the starting value and increment, are kept in a corresponding row of the <strong>pg_sequence</strong> catalog. ALTER SEQUENCE updates are now fully transactional, implying that the sequence is locked until commit. The nextval() and setval() functions remain nontransactional.</p>
<p>The main incompatibility introduced by this change is that selecting from a sequence relation now returns only the three fields named above. To obtain the sequence’s other properties, applications must look into <strong>pg_sequence</strong>. The new system view pg_sequences can also be used for this purpose; it provides column names that are more compatible with existing code.</p>
<p>The output of psql’s \d command for a sequence has been redesigned, too.</p>
</blockquote>
<p>とのことで、いままで <code>PostgreSQL</code> の <code>ID Sequence</code>を設定していた、こういうコードが落ちるようになった。</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SELECT setval(<span class="string">'<span class="subst">#&#123;sequence&#125;</span>'</span>, (SELECT GREATEST(MAX(<span class="comment">#&#123;quoted_id&#125;)+(SELECT increment_by FROM #&#123;sequence&#125;), (SELECT min_value FROM #&#123;sequence&#125;)) FROM #&#123;<span class="doctag">@model</span>_class.quoted_table_name&#125;), false)</span></div></pre></td></tr></table></figure>
<p>エラーはこんな感じ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Failure/Error: SeedFu.seed</div><div class="line"></div><div class="line">ActiveRecord::StatementInvalid:</div><div class="line">  PG::UndefinedColumn: ERROR:  column &quot;increment_by&quot; does not exist</div></pre></td></tr></table></figure>
<p>以下のように、新たに導入された<code>pg_sequence</code>カタログを参照するように変更した。</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SELECT setval(<span class="string">'<span class="subst">#&#123;sequence&#125;</span>'</span>, (SELECT GREATEST(MAX(<span class="comment">#&#123;quoted_id&#125;)+(SELECT seqincrement FROM pg_sequence WHERE seqrelid = '#&#123;sequence&#125;'::regclass), (SELECT seqmin FROM pg_sequence WHERE seqrelid = '#&#123;sequence&#125;'::regclass)) FROM #&#123;<span class="doctag">@model</span>_class.quoted_table_name&#125;),</span></div></pre></td></tr></table></figure>
<p>ちなみにRailsの類似処理は既にマージされていた。</p>
<blockquote>
<p><a href="https://github.com/rails/rails/pull/28864" target="_blank" rel="external">https://github.com/rails/rails/pull/28864</a></p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ppworks.github.io/posts/244/" data-id="cj9rrblk3000cx52mbvc060xy" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Rails/">Rails</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-243.html" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/posts/243/" class="article-date">
  <time datetime="2017-10-30T13:25:37.000Z" itemprop="datePublished">2017-10-30 13:25:37</time>
</a>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        

  <h1 itemprop="name">
    <a class="article-title" href="/posts/243/">勉強/2017/10/30/Hexo と esa 連携するときの travis の設定</a>
  </h1>


      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Copied from: <a href="/posts/242">blog/勉強/2017/10/30/Hexo を esa ぽい URL にする</a></p>
<p>多分こんな感じでいいはず。</p>
<p><img src="https://img.esa.io/uploads/production/attachments/4729/2017/10/30/11/d537e8a6-7bd8-4db9-be69-003a9e415038.png" alt="image.png (247.2 kB)"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ppworks.github.io/posts/243/" data-id="cj9rrbljl000ax52moeiiibq3" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-242.html" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/posts/242/" class="article-date">
  <time datetime="2017-10-30T13:11:45.000Z" itemprop="datePublished">2017-10-30 13:11:45</time>
</a>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        

  <h1 itemprop="name">
    <a class="article-title" href="/posts/242/">勉強/2017/10/30/Hexo を esa ぽい URL にする</a>
  </h1>


      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Copied from: <a href="/posts/241">blog/勉強/2017/10/30/Hexo</a></p>
<p>Hexoのパスを<code>/posts/242</code>みたいにしてあげれば↑の<strong>Copied from</strong>もいい感じにリンクされるのでは説。</p>
<p><a href="https://github.com/ppworks/ppworks.github.io/commit/0ca5a701df1482bc638a5320ac047c622ad2d947" target="_blank" rel="external">https://github.com/ppworks/ppworks.github.io/commit/0ca5a701df1482bc638a5320ac047c622ad2d947</a></p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">diff --git a/_config.yml b/_config.yml</div><div class="line">index 76bbbfb..61852bc 100644</div><div class="line"><span class="comment">--- a/_config.yml</span></div><div class="line"><span class="comment">+++ b/_config.yml</span></div><div class="line">@@ -14,14 +14,14 @@ timezone: Asia/Tokyo</div><div class="line"> ## If your site is put in a subdirectory, set url as 'http://yoursite.com/child' and root as '/child/'</div><div class="line"> url: https://ppworks.github.io</div><div class="line"> root: /</div><div class="line"><span class="deletion">-permalink: :title</span></div><div class="line"><span class="addition">+permalink: posts/:number/</span></div><div class="line"> permalink_defaults:</div><div class="line"></div><div class="line"> # Directory</div><div class="line"> source_dir: source</div><div class="line"> public_dir: public</div><div class="line"> tag_dir: tags</div><div class="line"><span class="deletion">-archive_dir: archives</span></div><div class="line"><span class="addition">+archive_dir: posts</span></div><div class="line"> category_dir: categories</div><div class="line"> code_dir: downloads/code</div><div class="line"> i18n_dir: :lang</div><div class="line">diff --git a/themes/landscape/_config.yml b/themes/landscape/_config.yml</div><div class="line">index 4c1bb96..e8d5ba2 100644</div><div class="line"><span class="comment">--- a/themes/landscape/_config.yml</span></div><div class="line"><span class="comment">+++ b/themes/landscape/_config.yml</span></div><div class="line"><span class="meta">@@ -1,7 +1,7 @@</span></div><div class="line"> # Header</div><div class="line"> menu:</div><div class="line">   Home: /</div><div class="line"><span class="deletion">-  Archives: /archives</span></div><div class="line"><span class="addition">+  Archives: /posts</span></div><div class="line"> rss: /atom.xml</div><div class="line"></div><div class="line"> # Content</div></pre></td></tr></table></figure>
<p><code>permalink: posts/:number</code>にしたくなりがちだけど、ブラウザが<code>html</code>として認識しなくなってしまうので、<code>/</code>をつけて、トレイリングスラッシュあり的な扱いでお茶を濁す。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ppworks.github.io/posts/242/" data-id="cj9rrbljd0009x52m21itctfw" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-241.html" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/posts/241/" class="article-date">
  <time datetime="2017-10-30T13:06:49.000Z" itemprop="datePublished">2017-10-30 13:06:49</time>
</a>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        

  <h1 itemprop="name">
    <a class="article-title" href="/posts/241/">勉強/2017/10/30/Hexo</a>
  </h1>


      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Copied from: <a href="/posts/240">blog/勉強/2017/10/29/Hexo</a></p>
<p>何も考えずに他人の<code>.travis.yml</code>を適当に使ってたので、ちょっと調整したりした。<br>本当は<code>public</code>をcacheしたいんだけど、どうしてもうまく行かずに一旦<a href="https://github.com/ppworks/ppworks.github.io/commit/8c77f8c49ac221814b4455558561bb4b0dd8cca9" target="_blank" rel="external">ほぼ元のと同じ感じになった</a>。この時間、なんだったんだ。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">language: node_js</div><div class="line">sudo: false</div><div class="line">cache:</div><div class="line">  apt: true</div><div class="line">  directories:</div><div class="line">  - node_modules</div><div class="line">node_js:</div><div class="line">- &apos;6&apos;</div><div class="line">branches:</div><div class="line">  only:</div><div class="line">  - esa</div><div class="line">env:</div><div class="line">  global:</div><div class="line">  - GIT_COMMITTER_NAME=ppworks</div><div class="line">  - GIT_COMMITTER_EMAIL=koshikawa@ppworks.jp</div><div class="line">  - GIT_AUTHOR_NAME=ppworks</div><div class="line">  - GIT_AUTHOR_EMAIL=koshikawa@ppworks.jp</div><div class="line">before_install:</div><div class="line">- npm install</div><div class="line">before_script:</div><div class="line">- git config --global user.name &apos;ppworks&apos;</div><div class="line">- git config --global user.email &apos;koshikawa@ppworks.jp&apos;</div><div class="line">- rm -fr public</div><div class="line">- git clone --depth=1 --branch=master https://github.com/ppworks/ppworks.github.io.git public</div><div class="line">- cd public</div><div class="line">- git ls-files | xargs -I &#123;&#125; rm -rf &#123;&#125;</div><div class="line">- cd -</div><div class="line">script:</div><div class="line">- $(npm bin)/hexo generate</div><div class="line">- cd public</div><div class="line">- git add -A</div><div class="line">- git commit -m &apos;Update&apos;</div><div class="line">- git push https://$GH_TOKEN@github.com/ppworks/ppworks.github.io.git master</div></pre></td></tr></table></figure>
<p>Travis CIでのHexo自動ビルドエラーについて · Issue #2 · llminatoll/wakaba-review <a href="https://github.com/llminatoll/wakaba-review/issues/2" target="_blank" rel="external">https://github.com/llminatoll/wakaba-review/issues/2</a></p>
<p>が大変参考になった。ありがたい。</p>
<p>そして、dateが毎回書き換わる問題によって、permalinkも毎回変わってしまってつらかったので、一旦permalinkからdateを消すという雑な対応をした。</p>
<p><a href="https://github.com/ppworks/ppworks.github.io/commit/12eb69754b42587e7c6e6b78b29af83acbed3418" target="_blank" rel="external">https://github.com/ppworks/ppworks.github.io/commit/12eb69754b42587e7c6e6b78b29af83acbed3418</a></p>
<blockquote>
<p>本当は<code>public</code>をcacheしたいんだけど、どうしてもうまく行かず</p>
</blockquote>
<p>どうも<code>public</code>配下の<code>cache</code>をクリアしても、<code>git-clone</code>したrepositoryが<code>master</code>ブランチになってしまって、コンフリクトし続けてしまった。何か手順がミスっていたかもしれない。</p>
<p>どうせcacheしてもarchiveをネットワーク越しにもってくるし、<code>git clone --depth=1</code>と対して変わらんので、いいかもしれない。</p>
<blockquote>
<p>git ls-files | xargs -I {} rm -rf {}</p>
</blockquote>
<p>何なの、って思ってたけど、<a href="https://github.com/llminatoll/wakaba-review/issues/2#issuecomment-312908585" target="_blank" rel="external">tricknotesさんのコメント</a>をみて理解した。<code>source</code>や<code>theme</code>などから消したファイルの差分を検知するために、一旦雑にワークディレクトリから全ファイルを消してから、<code>hexo generate</code>を実行することで、正しい結果をコミットできる。なるほどだ。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ppworks.github.io/posts/241/" data-id="cj9rrblj40005x52me0pihpf6" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-240.html" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/posts/240/" class="article-date">
  <time datetime="2017-10-30T02:51:36.000Z" itemprop="datePublished">2017-10-30 02:51:36</time>
</a>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        

  <h1 itemprop="name">
    <a class="article-title" href="/posts/240/">勉強/2017/10/29/Hexo</a>
  </h1>


      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>個人esaの特定のカテゴリ配下を <a href="https://ppworks.github.io">https://ppworks.github.io</a> としてブログにしてみることにした。</p>
<ol>
<li><a href="https://github.com/taea/taea.github.io" target="_blank" rel="external">https://github.com/taea/taea.github.io</a> を雑にfork</li>
<li><a href="https://github.com/ppworks/ppworks.github.io/commit/9f2511addb3eeed0c023912c3078270c1124030b" target="_blank" rel="external">taeaをppworks</a>に変える</li>
<li>esaのGitHub連携をする(personal access tokenは<code>public_repo</code>だけチェックが入っていればよい</li>
<li>travis-ci.orgのsettingで<code>Build only if .travis.yml is present</code>をチェックする（しないとmasterブランチがコケ続ける）</li>
<li>travis-ci.orgのsettingで<code>GH_TOKEN</code>をセットする</li>
<li>masterをまっさらにする(<code>git rm -r archives categories css fancybox js tags index.html</code>)</li>
<li><a href="https://github.com/ppworks/ppworks.github.io/compare/4b1722c953715da4a07c3c865d728a4cbf96124c...c5fae67e654f335fd5af91c1aef11d3ffd0a8a21" target="_blank" rel="external">なんか色々調整する</a><ul>
<li>とくにpost.dateがmetaデータにないせいで起きる問題へのワークアラウンドがポイントではあるがesa側で柔軟に指定できるようにしたいなという気持ちがある。</li>
</ul>
</li>
</ol>
<p>とりあえず、それっぽくなった。（テーマは宇宙のままだけど）</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ppworks.github.io/posts/240/" data-id="cj9rrbliy0004x52mo4x3ltbm" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-239.html" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/posts/239/" class="article-date">
  <time datetime="2017-10-29T21:37:26.000Z" itemprop="datePublished">2017-10-29 21:37:26</time>
</a>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        

  <h1 itemprop="name">
    <a class="article-title" href="/posts/239/">てすと</a>
  </h1>


      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>てすてす。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ppworks.github.io/posts/239/" data-id="cj9rrbliv0003x52m1003yzfg" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next&raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/posts/251/">Dockerでrails s</a>
          </li>
        
          <li>
            <a href="/posts/250/">Dockerでrails new</a>
          </li>
        
          <li>
            <a href="/posts/249/">Heroku SSL EndpointからAutomated Certificate Managementへ移行する</a>
          </li>
        
          <li>
            <a href="/posts/245/">Hexo のサイドバーに travis の builds を表示した</a>
          </li>
        
          <li>
            <a href="/posts/244/">Seed FuをPostgreSQL 10 対応する</a>
          </li>
        
      </ul>
    </div>
  </div>


  
    <div class="widget-wrap">
  <h3 class="widget-title">Builds</h3>
  <div class="widget">
    <a href="https://travis-ci.org/ppworks/ppworks.github.io/builds"><img class="travis-badge" src="https://travis-ci.org/ppworks/ppworks.github.io.svg?branch=esa" /></a>
    <ul id="js-travis-ci-builds" class="travis-list">
    </ul>
  </div>
</div>

  
    <div class="widget-wrap">
  <h3 class="widget-title">Links</h3>
  <div class="widget">
    <ul>
      <li><a href="https://taea.github.io">taea.github.io</a></li>
    </ul>
  </div>
</div>

  
</aside>

        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 ppworks<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/posts" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.19.1/moment.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>